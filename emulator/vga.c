#include "vga.h"

vga_t vga_device = {
    .misc = 0x67,
    .seq =
        {0x03, 0x00, 0x03, 0x00, 0x02},
    .crtc =
        {0x5F, 0x4F, 0x50, 0x82, 0x55, 0x81, 0xBF, 0x1F,
         0x00, 0x4F, 0x0D, 0x0E, 0x00, 0x00, 0x00, 0x50,
         0x9C, 0x0E, 0x8F, 0x28, 0x1F, 0x96, 0xB9, 0xA3,
         0xFF},
    .gc =
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x0E, 0x00,
         0xFF},
    .ac =
        {0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x14, 0x07,
         0x38, 0x39, 0x3A, 0x3B, 0x3C, 0x3D, 0x3E, 0x3F,
         0x0C, 0x00, 0x0F, 0x08, 0x00},
};

void vga_install()
{
    memory_map_buffer(MEMORY_READ_FLAG | MEMORY_WRITE_FLAG,
                      vga_device.buffer,
                      0xa0000,
                      0,
                      0xc0000 - 0xa0000);
}

void vga_service()
{
    
}

void vga_render_frame(uint32_t *rgb_buffer)
{
}